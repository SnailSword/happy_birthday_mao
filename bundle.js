!function(e){function t(t){for(var r,i,c=t[0],s=t[1],l=t[2],f=0,p=[];f<c.length;f++)i=c[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&p.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/happy_birthday_mao/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;a.push([345,1]),n()}({345:function(e,t,n){e.exports=n(615)},534:function(e,t){},535:function(e,t){},536:function(e,t){},537:function(e,t){},538:function(e,t){},539:function(e,t){},605:function(e,t){},606:function(e,t){},607:function(e,t){},609:function(e,t,n){var r={"./af":209,"./af.js":209,"./ar":210,"./ar-dz":211,"./ar-dz.js":211,"./ar-kw":212,"./ar-kw.js":212,"./ar-ly":213,"./ar-ly.js":213,"./ar-ma":214,"./ar-ma.js":214,"./ar-sa":215,"./ar-sa.js":215,"./ar-tn":216,"./ar-tn.js":216,"./ar.js":210,"./az":217,"./az.js":217,"./be":218,"./be.js":218,"./bg":219,"./bg.js":219,"./bm":220,"./bm.js":220,"./bn":221,"./bn.js":221,"./bo":222,"./bo.js":222,"./br":223,"./br.js":223,"./bs":224,"./bs.js":224,"./ca":225,"./ca.js":225,"./cs":226,"./cs.js":226,"./cv":227,"./cv.js":227,"./cy":228,"./cy.js":228,"./da":229,"./da.js":229,"./de":230,"./de-at":231,"./de-at.js":231,"./de-ch":232,"./de-ch.js":232,"./de.js":230,"./dv":233,"./dv.js":233,"./el":234,"./el.js":234,"./en-SG":235,"./en-SG.js":235,"./en-au":236,"./en-au.js":236,"./en-ca":237,"./en-ca.js":237,"./en-gb":238,"./en-gb.js":238,"./en-ie":239,"./en-ie.js":239,"./en-il":240,"./en-il.js":240,"./en-nz":241,"./en-nz.js":241,"./eo":242,"./eo.js":242,"./es":243,"./es-do":244,"./es-do.js":244,"./es-us":245,"./es-us.js":245,"./es.js":243,"./et":246,"./et.js":246,"./eu":247,"./eu.js":247,"./fa":248,"./fa.js":248,"./fi":249,"./fi.js":249,"./fo":250,"./fo.js":250,"./fr":251,"./fr-ca":252,"./fr-ca.js":252,"./fr-ch":253,"./fr-ch.js":253,"./fr.js":251,"./fy":254,"./fy.js":254,"./ga":255,"./ga.js":255,"./gd":256,"./gd.js":256,"./gl":257,"./gl.js":257,"./gom-latn":258,"./gom-latn.js":258,"./gu":259,"./gu.js":259,"./he":260,"./he.js":260,"./hi":261,"./hi.js":261,"./hr":262,"./hr.js":262,"./hu":263,"./hu.js":263,"./hy-am":264,"./hy-am.js":264,"./id":265,"./id.js":265,"./is":266,"./is.js":266,"./it":267,"./it-ch":268,"./it-ch.js":268,"./it.js":267,"./ja":269,"./ja.js":269,"./jv":270,"./jv.js":270,"./ka":271,"./ka.js":271,"./kk":272,"./kk.js":272,"./km":273,"./km.js":273,"./kn":274,"./kn.js":274,"./ko":275,"./ko.js":275,"./ku":276,"./ku.js":276,"./ky":277,"./ky.js":277,"./lb":278,"./lb.js":278,"./lo":279,"./lo.js":279,"./lt":280,"./lt.js":280,"./lv":281,"./lv.js":281,"./me":282,"./me.js":282,"./mi":283,"./mi.js":283,"./mk":284,"./mk.js":284,"./ml":285,"./ml.js":285,"./mn":286,"./mn.js":286,"./mr":287,"./mr.js":287,"./ms":288,"./ms-my":289,"./ms-my.js":289,"./ms.js":288,"./mt":290,"./mt.js":290,"./my":291,"./my.js":291,"./nb":292,"./nb.js":292,"./ne":293,"./ne.js":293,"./nl":294,"./nl-be":295,"./nl-be.js":295,"./nl.js":294,"./nn":296,"./nn.js":296,"./pa-in":297,"./pa-in.js":297,"./pl":298,"./pl.js":298,"./pt":299,"./pt-br":300,"./pt-br.js":300,"./pt.js":299,"./ro":301,"./ro.js":301,"./ru":302,"./ru.js":302,"./sd":303,"./sd.js":303,"./se":304,"./se.js":304,"./si":305,"./si.js":305,"./sk":306,"./sk.js":306,"./sl":307,"./sl.js":307,"./sq":308,"./sq.js":308,"./sr":309,"./sr-cyrl":310,"./sr-cyrl.js":310,"./sr.js":309,"./ss":311,"./ss.js":311,"./sv":312,"./sv.js":312,"./sw":313,"./sw.js":313,"./ta":314,"./ta.js":314,"./te":315,"./te.js":315,"./tet":316,"./tet.js":316,"./tg":317,"./tg.js":317,"./th":318,"./th.js":318,"./tl-ph":319,"./tl-ph.js":319,"./tlh":320,"./tlh.js":320,"./tr":321,"./tr.js":321,"./tzl":322,"./tzl.js":322,"./tzm":323,"./tzm-latn":324,"./tzm-latn.js":324,"./tzm.js":323,"./ug-cn":325,"./ug-cn.js":325,"./uk":326,"./uk.js":326,"./ur":327,"./ur.js":327,"./uz":328,"./uz-latn":329,"./uz-latn.js":329,"./uz.js":328,"./vi":330,"./vi.js":330,"./x-pseudo":331,"./x-pseudo.js":331,"./yo":332,"./yo.js":332,"./zh-cn":333,"./zh-cn.js":333,"./zh-hk":334,"./zh-hk.js":334,"./zh-tw":335,"./zh-tw.js":335};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=609},612:function(e,t,n){var r=n(336),o=n(613);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a=(r(o,{insert:"head",singleton:!1}),o.locals?o.locals:{});e.exports=a},613:function(e,t,n){(t=n(337)(!1)).push([e.i,"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}a{text-decoration:none;outline:0}*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}html{font-family:sans-serif}h1{font-size:30px}body{background-color:#fff;text-align:center;color:#333}h1{padding-top:150px}.next-question-button{font-size:24px;color:#000;position:relative;bottom:83px;width:300px;height:50px;line-height:50px;margin:auto;cursor:pointer}.tools-container{width:300px;height:50px;margin:auto;position:relative}.tools-container .brushsize-picker-container{position:absolute;left:-20px}.tools-container .wired-rendered{position:absolute;right:0;top:5px}.result-page{padding:30px;line-height:30px;text-align:start;max-width:800px;margin:auto}\n",""]),e.exports=t},615:function(e,t,n){"use strict";n.r(t),n(346);var r=n(0),o=n.n(r),a=n(12),i=n.n(a),c=n(56),s=n(26),l=(n(614),n(92),n(50)),u=n(22);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return d(b(n=function(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}(this,(e=h(t)).call.apply(e,[this].concat(o)))),"state",{modelLoaded:!1,status:""}),d(b(n),"loadModel",function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))}}(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({status:"模型加载中..."}),e.next=3,l.c("./model/model.json");case 3:t=e.sent,n.setState({status:"模型加载完成，预热中..."}),t.predict(l.f([1,28,28,1])),window.model=t,window.resultStore={},n.setState({modelLoaded:!0,status:"我准备好了，可以开始啦"});case 9:case"end":return e.stop()}}),e)})))),d(b(n),"startGame",(function(e){n.props.history.push(e||"/happy_birthday_mao/game")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,o.a.Component),function(e,t,n){t&&m(e.prototype,t)}(t,[{key:"componentDidMount",value:function(){window.model?(window.resultStore={},this.setState({modelLoaded:!0,status:"我准备好了，可以开始啦"})):this.loadModel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.modelLoaded;return t.status,o.a.createElement(r.Fragment,null,o.a.createElement(u.b,{size:"lg"}),o.a.createElement(u.c,{size:"lg"},o.a.createElement("h1",null,"你画你猜")),o.a.createElement(u.b,{size:"lg"}),o.a.createElement(u.c,{size:"lg"},n?o.a.createElement("div",null,o.a.createElement("wired-button",{onClick:function(){return e.startGame()}},"简单模式"),"   ",o.a.createElement("wired-button",{onClick:function(){return e.startGame("/happy_birthday_mao/normalgame")}},"正常模式"),"   ",o.a.createElement("wired-button",{onClick:function(){return e.startGame("/happy_birthday_mao/hardergame")}},"困难模式")):o.a.createElement("wired-button",{disabled:!0},"等一下再开始游戏")),o.a.createElement(u.b,{size:"lg"}))}}]),t}(),v=n(344),j=["screwdriver","wristwatch","butterfly","sword","cat","shorts","eyeglasses","lollipop","baseball","traffic_light","sun","helmet","bridge","alarm_clock","drums","book","broom","fan","scissors","cloud","tent","clock","headphones","bicycle","stop_sign","table","donut","umbrella","smiley_face","pillow","bed","saw","light_bulb","shovel","bird","syringe","coffee_cup","moon","ice_cream","moustache","cell_phone","pants","anvil","radio","chair","star","door","face","mushroom","tree","rifle","camera","lightning","flower","basketball","wheel","hammer","hat","knife","diving_board","square","cup","mountain","apple","spoon","key","pencil","line","ladder","triangle","t-shirt","dumbbell","microphone","snake","sock","suitcase","laptop","paper_clip","rainbow","candle","bread","spider","envelope","circle","power_outlet","tooth","hot_dog","frying_pan","bench","ceiling_fan","tennis_racquet","car","beard","axe","baseball_bat","pizza","grapes","eye","cookie","airplane"];function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var E=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=function(e){return e-20>0?e-20:0},o=function(e){return e+20>300?300:e+20};return{min:{x:r(Math.min.apply(Math,w(t))),y:r(Math.min.apply(Math,w(n)))},max:{x:o(Math.max.apply(Math,w(t))),y:o(Math.max.apply(Math,w(n)))}}},k=n(82);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function C(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?P(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function t(){var e,n;x(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return T(P(n=C(this,(e=z(t)).call.apply(e,[this].concat(o)))),"draw",(function(e){var t=e.size,r=e.checked;n.ctx.clearRect(0,0,50,50),n.rc.circle(25,25,8+5*t,{roughness:1,strokeWidth:1,fill:r?"#000":null,stroke:"#000",fillStyle:"hachure",hachureGap:1})})),n}return M(t,o.a.Component),S(t,[{key:"componentDidMount",value:function(){var e=i.a.findDOMNode(this);this.ctx=e.getContext("2d"),this.rc=k.a.canvas(e),this.draw(this.props)}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.checked^this.props.checked&&this.draw(e)}},{key:"render",value:function(){return o.a.createElement("canvas",{onClick:this.props.onClick,width:"50",height:"50"})}}]),t}(),q=function(e){function t(e){var n;return x(this,t),T(P(n=C(this,z(t).call(this,e))),"state",{}),T(P(n),"onCircleClick",(function(e){var t=n.props.onChange;t&&t(e),n.setState({value:e})})),n.state={value:e.initValue||1},n}return M(t,o.a.Component),S(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){for(var e=this,t=this.props.counts,n=this.state.value,r=[],a=function(t){r.push(o.a.createElement(D,{key:"c-"+t,onClick:function(){return e.onCircleClick(t)},size:t,checked:n===t}))},i=1;i<=t;i++)a(i);return r}}]),t}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){return 2+4*e},B=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),F(R(n=function(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?R(e):t}(this,K(t).call(this,e))),"initData",(function(e){n.key=e.canvasKey||"default",n.coords=[],n.pressed=!1})),F(R(n),"state",{}),F(R(n),"recordCoor",(function(e){var t=n.canvas.getPointer(e.e),r=t.x,o=t.y;r>=0&&o>=0&&n.pressed&&n.coords.push(t)})),F(R(n),"allowDrawing",(function(){canvas.isDrawingMode=1})),F(R(n),"onBrushSizeChange",(function(e){n.canvas.freeDrawingBrush.width=G(e)})),F(R(n),"onClear",(function(e){n.coords=[],n.canvas.clear(),n.canvas.backgroundColor="#ffffff",n.props.onChange&&n.props.onChange(0)})),n.initData(e),n.randomText=Math.random().toString(36).substr(2),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,o.a.Component),function(e,t,n){t&&N(e.prototype,t)}(t,[{key:"componentDidMount",value:function(){var e=this;window.model||console.log("跳回首页");var t=new v.fabric.Canvas(this.id);this.canvas=t,t.backgroundColor="#ffffff",t.isDrawingMode=1,t.freeDrawingBrush.color="black",t.freeDrawingBrush.width=G(2),t.renderAll(),t.on("mouse:up",(function(t){setTimeout((function(){var t=function(e,t,n){var r=function(e,t,n){if(t.length>=2){var r=function(e,t,n){var r=E(t),o=window.devicePixelRatio,a=e.contextContainer.getImageData(r.min.x*o,r.min.y*o,(r.max.x-r.min.x)*o,(r.max.y-r.min.y)*o);return window.resultStore[n]=e.toSVG({viewBox:{x:r.min.x,y:r.min.y,width:r.max.x-r.min.x,height:r.max.y-r.min.y},width:50,height:50}),a}(e,t,n);return model.predict(function(e){return l.e((function(){var t=l.a.fromPixels(e,1),n=l.b.resizeBilinear(t,[28,28]).toFloat(),r=l.d(255);return l.d(1).sub(n.div(r)).expandDims(0)}))}(r)).dataSync()}return new Array(100)}(e,t,n),o=j.indexOf(n);return console.log(o,n,r[o]),r[o]}(e.canvas,e.coords,e.key);e.pressed=!1,e.props.onChange&&e.props.onChange(t)}),200)})),t.on("mouse:down",(function(t){e.pressed=!0})),t.on("mouse:move",(function(t){e.recordCoor(t)}))}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.canvasKey&&e.canvasKey!==this.props.canvasKey&&(this.initData(e),this.onClear())}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(u.c,{size:"lg"},o.a.createElement("wired-card",null,o.a.createElement("canvas",{id:this.id,width:"300",height:"300"}))),o.a.createElement(u.c,{size:"lg"},o.a.createElement("div",{className:"tools-container"},o.a.createElement("div",{className:"brushsize-picker-container"},o.a.createElement(q,{counts:5,initValue:2,onChange:this.onBrushSizeChange})),o.a.createElement("wired-button",{onClick:this.onClear},"清空"))))}},{key:"id",get:function(){return"canvas-".concat(this.randomText)}}]),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(H(n=function(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?H(e):t}(this,W(t).call(this,e))),"draw",(function(e){n.ctx.clearRect(0,0,500,200),n.canvas.rectangle(25,25,n.width,n.height);var t=e.progress||0;(t=t>1?1:t)&&n.canvas.rectangle(29,29,(n.width-8)*t,n.height-8,{fill:"rgb(30,190,30)",fillWeight:3,stroke:"transparent"})})),n.width=300,n.height=40,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,o.a.Component),function(e,t,n){t&&L(e.prototype,t)}(t,[{key:"componentDidMount",value:function(){var e=i.a.findDOMNode(this);this.ctx=e.getContext("2d"),this.canvas=k.a.canvas(e),this.draw(this.props)}},{key:"UNSAFE_componentWillUpdate",value:function(e){e.progress!==this.props.progress&&this.draw(e)}},{key:"render",value:function(){return this.props.progress,o.a.createElement("canvas",{width:350,height:100})}}]),t}();function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){var t=e.canvasKey,n=e.question,r=e.onChange;return o.a.createElement("div",null,o.a.createElement("h2",{className:"question"},n),o.a.createElement(u.b,{size:"lg"}),o.a.createElement(B,{canvasKey:t,onChange:r}))},ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(Z(n=function(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?Z(e):t}(this,Y(t).call(this,e))),"state",{passed:!1,currentIndex:0}),ee(Z(n),"onProbChange",(function(e){var t=n.state.currentIndex,r=n.data[t].p+(n.props.level||0);console.log(e,r),n.setState({passed:e>r,progress:e/r})})),ee(Z(n),"toNext",(function(){var e=n.state,t=e.currentIndex;e.passed||n.showToast;var r=t+1;n.setState({currentIndex:r,passed:!1,progress:0})})),ee(Z(n),"showToast",(function(){u.a.info("nonono",1)})),ee(Z(n),"toResult",(function(){n.props.history.push("/happy_birthday_mao/result")})),ee(Z(n),"getButton",(function(){var e=n.state,t=e.currentIndex,r=e.passed;return t===n.data.length-1?r?o.a.createElement("wired-button",{onClick:n.toResult},"开始表演"):o.a.createElement("wired-button",{disabled:!0,onClick:n.showToast},"开始表演"):r?o.a.createElement("wired-button",{onClick:n.toNext},"下一题"):o.a.createElement("wired-button",{disabled:!0,onClick:n.showToast},"下一题")})),n.data=[{question:o.a.createElement("span",null,"你大学体育课选的什么课"),key:"basketball",p:.2},{question:o.a.createElement("span",null,"7-11什么东西6块钱一个"),key:"ice_cream",p:.3},{question:o.a.createElement("span",null,"画个自行车骑着去下一关"),key:"bicycle",p:.12},{question:o.a.createElement("span",null,"红太狼打灰太狼用什么"),key:"frying_pan",p:.2},{question:o.a.createElement("span",null,"画一个哈哈大笑"),key:"smiley_face",p:.3},{question:o.a.createElement("span",null,"画一把钥匙，并大喊芝麻开门"),key:"key",p:.01}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(t,o.a.Component),function(e,t,n){t&&X(e.prototype,t)}(t,[{key:"componentDidMount",value:function(){window.model||this.props.history.push("/happy_birthday_mao/")}},{key:"render",value:function(){var e=this.state,t=e.currentIndex,n=e.passed,a=e.progress,i=t===this.data.length-1;return o.a.createElement(r.Fragment,null,o.a.createElement(u.b,{size:"lg"}),o.a.createElement(te,{canvasKey:this.data[t].key,question:this.data[t].question,onChange:this.onProbChange}),o.a.createElement(u.c,{size:"lg"},o.a.createElement(J,{progress:a}),n&&!i&&o.a.createElement("p",{onClick:this.toNext,className:"next-question-button"},o.a.createElement("span",null,"下一题")),n&&i&&o.a.createElement("p",{onClick:this.toResult,className:"next-question-button"},o.a.createElement("span",null,"芝麻开门"))))}}]),t}(),re=n(10),oe=n.n(re);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t,n){return t&&ce(e.prototype,t),n&&ce(e,n),e}function le(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?fe(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=function(e){var t=e.canvasKey;return window.resultStore?o.a.createElement("span",{dangerouslySetInnerHTML:{__html:window.resultStore[t]}}):null},be=function(e){function t(){var e,n;ie(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return me(fe(n=le(this,(e=ue(t)).call.apply(e,[this].concat(o)))),"state",{}),me(fe(n),"setTime",(function(){var e,t=oe()();e=t.isAfter(n.birthday)?"已过":"还有";var r=n.birthday.diff(t,"seconds")%60,o=n.birthday.diff(t,"minutes")%60,a=n.birthday.diff(t,"hours")%24,i=n.birthday.diff(t,"days");n.setState({ss:r,mm:o,HH:a,DD:i,text:e})})),n}return pe(t,o.a.Component),se(t,[{key:"componentDidMount",value:function(){var e=this;this.birthday=oe()("2020-02-14 00:00:00"),this.setTime(),this.t=setInterval((function(){e.setTime()}),1e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.t)}},{key:"render",value:function(){var e=this.state,t=e.text,n=e.DD,r=e.HH,a=e.mm,i=e.ss;return o.a.createElement("span",null,"".concat(t).concat(n,"天").concat(r,"小时").concat(a,"分").concat(i,"秒"))}}]),t}(),ye=function(e){function t(){var e,n;ie(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return me(fe(n=le(this,(e=ue(t)).call.apply(e,[this].concat(o)))),"startGame",(function(){n.props.history.push("/happy_birthday_mao/game")})),n}return pe(t,o.a.Component),se(t,[{key:"componentDidMount",value:function(){window.model||this.props.history.push("/")}},{key:"render",value:function(){return window.model?o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"result-page"},o.a.createElement("p",null,o.a.createElement("b",null,"毛衣毛：")),o.a.createElement("p",null,"大一",o.a.createElement(he,{canvasKey:"basketball"}),"课上认识了你，这个相识直接把体育课变成聊天课，导致我学了两年篮球，都还不懂篮球比赛规则。"),o.a.createElement("br",null),o.a.createElement("p",null,"普普通通的相遇之后，我们开始了普普通通的友谊，一起做了过很多普普通通的事，从普普通通的生活中找乐子："),o.a.createElement("p",null,"对比全家和711",o.a.createElement(he,{canvasKey:"ice_cream"}),"的性价比"),o.a.createElement("p",null,"薅摩拜的羊毛大晚上出去骑车，还得骑几分钟交换一下"),o.a.createElement("p",null,"从红光到犀浦你坐高铁我骑",o.a.createElement(he,{canvasKey:"bicycle"}),"一起出发我比你早到好多"),o.a.createElement("p",null,"实在受不了我家的粘粘锅，过生日你送了我个高级",o.a.createElement(he,{canvasKey:"frying_pan"})),o.a.createElement("p",null,"… …"),o.a.createElement("p",null,"还有像唱K、旅游、去游戏厅、看电影、狼人杀，甚至像吃面、逛超市、上自习这种最最正常的事，但不知道为什么，只要是和你在一起经历的，都会发生些神奇的事情。"),o.a.createElement("p",null,"就像这个小礼物一样，你一笔一划地把各种各样的东西画进了我的生活。"),o.a.createElement("br",null),o.a.createElement("p",null,"你说我用一把旧",o.a.createElement(he,{canvasKey:"key"}),"，敲开了厚厚的墙。墙上的砖层层展开后，我发现墙里的世界就和这小巷一样，普普通通，却又其乐无穷，而且现在我也不知道那边是墙里，哪那边是墙外了。"),o.a.createElement("p",null,"我们都好像得到了那时所期望的东西，过上了从前期望的日子，我们都走到了曾以为的终点，却好像都把它当做了新的起点。"),o.a.createElement("br",null),o.a.createElement("p",null,"我记性很差，好多事，都要靠看原来的照片和日记才能回忆起来，比如这里面的好多素材，我都是看",o.a.createElement("a",{href:"https://snailsword.github.io/2017/01/28/onemao/",target:"_blank"},"这篇日记"),"才想起来的， 真的就像日记里写的那样，慢慢的忘了，不过好在，还写下了一部分，而且事情虽然忘了，但是我相信我们经历过的每一件事情，都会化作自己性格的一部分，潜移默化地影响日后的生活。"),o.a.createElement("p",null,"写着写着话风不知道为啥突然忧郁了，一定是你前面画得太烂了导致的，你看你，搞得我还得强行转移一下话题。"),o.a.createElement("br",null),o.a.createElement("p",null,"你20岁生日的时候，我刚开始学习做网站，那时候做了个漏洞百出的生日倒计时， 这里也加一个来强行怀旧一下吧，不知道算了时差之后会不会有bug，要是有的话你就假装没看见吧哈哈哈。"),o.a.createElement("p",null,"现在距离你25岁生日",o.a.createElement(be,null),"，祝你生日快乐，天天",o.a.createElement(he,{canvasKey:"smiley_face"}))),o.a.createElement(u.c,{size:"lg"},o.a.createElement("wired-button",{onClick:this.startGame},"再玩一次")),o.a.createElement(u.b,{size:"lg"}),o.a.createElement(u.b,{size:"lg"})):null}}]),t}();function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.p,n(610),n(612),i.a.render(o.a.createElement((function(){return o.a.createElement(r.Fragment,null,o.a.createElement(c.b,{history:Object(s.a)()},o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/happy_birthday_mao/",component:g}),o.a.createElement(c.a,{path:"/happy_birthday_mao/hardergame",component:function(e){return o.a.createElement(ne,de({},e,{level:.5}))}}),o.a.createElement(c.a,{path:"/happy_birthday_mao/normalgame",component:function(e){return o.a.createElement(ne,de({},e,{level:.25}))}}),o.a.createElement(c.a,{path:"/happy_birthday_mao/game",component:function(e){return o.a.createElement(ne,de({},e,{level:0}))}}),o.a.createElement(c.a,{path:"/happy_birthday_mao/result",component:ye}))))}),null),document.getElementById("App"))}});